<!DOCTYPE html>
<html lang="en">
<head>
    <title>Analysis Results</title>
    {% load static %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/charts.js' %}"></script>
</head>
<body>
    <h1>Analysis Results</h1>
    <p>Welcome, {{ user_name }}!</p>

    <h2>Percentile Scores</h2>
    <canvas id="percentileChart"></canvas>

    <h2>Top 5 Countries</h2>
    <canvas id="topCountriesChart"></canvas>

    <h2>Mean Scores of Traits</h2>
    <h3>New User</h3>
    <canvas id="newUserMeanScoresChart"></canvas>

    <h3>All Users</h3>
    <canvas id="allUsersMeanScoresChart"></canvas>

    <!-- Safely pass JSON data to JavaScript -->
    <script id="percentiles-data" type="application/json">
        {{ percentiles|json_script:"percentiles-data" }}
    </script>
    <script id="top-countries-data" type="application/json">
        {{ top_countries|json_script:"top-countries-data" }}
    </script>
    <script id="new-user-mean-scores-data" type="application/json">
        {{ new_user_mean_scores|json_script:"new-user-mean-scores-data" }}
    </script>
    <script id="all-users-mean-scores-data" type="application/json">
        {{ all_users_mean_scores|json_script:"all-users-mean-scores-data" }}
    </script>
</body>
</html>
